var ucVersion;try{ucVersion=navigator.userAgent.match(/UCBS\/(\d+\.\d+)/)}catch(e){console.err(e)}var isUC=null!=ucVersion;console.log('inject h5_bridge with isUC: '+isUC);var enableAsyncCallback=!0;if(!isUC){console.log('try inject androidEmbedViewManager script in non UC webview!');document.androidEmbedViewManager||function(){var e={parseObjectElement:function(e){var n,t;if(e.children)for(var a=e.children.length,l=0;l<a;l++){var o=e.children[l];'type'===o.getAttribute('name')?n=o.getAttribute('value'):'id'===o.getAttribute('name')&&(t=o.getAttribute('value'))}void 0===t&&(t=e.id);var i=e.getBoundingClientRect(),c=0;document.documentElement&&document.documentElement.scrollLeft?c=document.documentElement.scrollLeft:document.body&&(c=document.body.scrollLeft);var r=0;document.documentElement&&document.documentElement.scrollTop?r=document.documentElement.scrollTop:document.body&&(r=document.body.scrollTop);return{elementId:t,type:n,x:i.left+c,y:i.top+r,width:i.width,height:i.height}},render:function(e){var n=document.getElementById(e);if(n&&"OBJECT"===n.tagName){console.log('render '+e);return this.parseObjectElement(n)}}};document.androidEmbedViewManager=e}()}document.addNebulaDocumentFlag||function(){console.log("begin load AlipayJSBridge");function o(e){log.call(messenger,"{bridge_token}h5container.message: "+JSON.stringify(e))}var messenger=window.__alipayNativeBridge__||window.__alipayConsole__||window.console,log=messenger.log,i=null,t=null;window.addEventListener("message",function(e){if(e&&"__RENDER_WORKER_IPC_MP__"===e.data&&null===t&&e.ports&&1===e.ports.length){(t=e.ports[0]).onmessage=function(n){try{var e=JSON.parse(n.data),t='postMessage'===e.handlerName?'message':e.handlerName;if(e.responseId){var a=c[e.responseId];'boolean'==typeof e.keepCallback&&e.keepCallback||delete c[e.responseId];'function'==typeof a&&(enableAsyncCallback?setTimeout(function(){a(e.responseData)},0):a(e.responseData))}else t&&AlipayJSBridge.trigger(t,e,e.callbackId)}catch(e){log.call(messenger,"failed to process message: "+n.data);log.call(messenger,e)}};i=function(e){e.__FastPath__=1;var n=JSON.stringify(e);t.postMessage(n)}}});var c={};window.AlipayJSBridge={call:function(e,n,t){if('string'==typeof e){if('function'==typeof n){t=n;n=null}else'object'!=typeof n&&(n=null);var a=''+(new Date).getTime()+Math.random();'function'==typeof t&&(c[a]=t);var l={func:e,param:n,msgType:'call',clientId:a};'postMessage'===e&&null!==i?i(l):o(l)}},callback:function(e,n){var t={clientId:e,param:n};null!==i&&'string'==typeof e&&'native_'!==e.substring(0,7)?i(t):o(t)},trigger:function(e,n,t){if(e){var a=document.createEvent('Events');a.initEvent(e,!1,!0);a.syncJsApis=[];if('object'==typeof n)for(var l in n)a[l]=n[l];a.clientId=t;var o=!document.dispatchEvent(a);t&&'back'===e&&AlipayJSBridge.callback(t,{prevent:o});t&&'closeWindow'===e&&AlipayJSBridge.callback(t,{prevent:o});t&&'firePullToRefresh'===e&&AlipayJSBridge.callback(t,{prevent:o});t&&'onShare'===e&&AlipayJSBridge.callback(t,{prevent:o});t&&'collectDestroyJsApi'===e&&AlipayJSBridge.callback(t,{syncJsApis:a.syncJsApis});t&&'pullIntercept'===e&&AlipayJSBridge.callback(t,{prevent:o});t&&'segControlClick'===e&&AlipayJSBridge.callback(t,{prevent:o});t&&'promotionClose'===e&&AlipayJSBridge.callback(t,{prevent:o})}},_invokeJS:function(e){e=JSON.parse(e);console.log("invokeJS msgType "+e.msgType+" func "+e.func);if('callback'===e.msgType){var n=c[e.clientId];'boolean'==typeof e.keepCallback&&e.keepCallback||delete c[e.clientId];'function'==typeof n&&(enableAsyncCallback?setTimeout(function(){n(e.param)},1):n(e.param))}else'call'===e.msgType&&e.func&&this.trigger(e.func,e.param,e.clientId)},devPerformance4Test:""};document.addNebulaDocumentFlag={};AlipayJSBridge.startupParams='{startupParams}';window.POSTMESSAGE_FAST='{POSTMESSAGE_FAST}';window.APVIEWID='{APVIEWID}';var a=document.createEvent('Events');a.initEvent('AlipayJSBridgeReady',!1,!1);var l=document.addEventListener;document.addEventListener=function(e,n){e===a.type&&(enableAsyncCallback?setTimeout(function(){n(a)},1):n(a));l.apply(document,arguments)};document.dispatchEvent(a);console.log("load AlipayJSBridge dispatchEvent AlipayJSBridgeReady")}();
// do not modify
